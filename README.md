




## Setting up Django environment.

1. pip3 install django gunicorn   
   gunicorn is required to instal django in Heroku.

2. pip3 install dj_database_url psycopg2
   libraries required

3. pip3 install dj3-cloudinary-storage

4. pip3 freeze --local > requirements.txt
    Saving all requirement list to requirement.txt

5. django-admin startproject tails_on_trails .
   Creating project in current repo

6. python3 manage.py startapp forum

7. In setting.py file under the project directory(tails_on_trails), 
   add the forum app just created previous step.

8. python3 manage.py migrate
   Run server by typing below and make sure that the django message displays in opened browser window.
   python3 manage.py runserver

## Deployment

1. In the Heroku dashboard, click new then enter the app name and specipy the region.

2. In Add-on section in the resources tab, search postgres then select Heroku Postgres and submit order from button in the popup window.

3. In the setting tab, click on Reveal Config Vars button then copy the value for DATABASE_URL key.

4. Create env.py directly under the repo directory same lavel as manage.py and make sure the file name is included in .gitignore
Create DATABASE_URL with the value of Heroku config vars and SECRET_KEY generated by Django Secret Key Generator. 
Go back to Heroku Config vars and add SECRET_KEY and its value.

5. In setting.py include followings:
import os
import dj_database_url
if os.path.isfile('env.py'):
    import env
modify SECRET_KEY line to SECRET_KEY = os.environ.get('SECRET_KEY')

Replace DATABASES as
DATABASES = {

    'default': dj_database_url.parse(os.environ.get('DATABASE_URL'))
}

6. In the terminal, migrate the change by
python3 manage.py migrate. Check the resource tab in heroku and choose 
Heroku Postgres then ensure the changes are reflected in the database

7. login to Cloudinary and copy the API Environment variable and paste in env.py and also Config Vars in Heroku.

8. DISABLE_COLLECTSTATIC set to 1 in Config Vars as the initial deployment does not contain static files yet.

9. Add Cloudinary Libraries to installed apps in setting.py.
   'cloudinary_storage', before 'django.contrib.staticfiles', and 'cloudinary' after it.

10. Set STATICFILES_DIRS, STATICFILES_DIRS, STATIC_ROOT, MEDIA_URL and DEFAULT_FILE_STORAGE in setting.py so that Django can use the directories approproately.

11. Set TEMPLATES_DIR just below BASE_DIR and insert TEMPLATES_DIR in TEMPLATES array
'DIRS': []

12. Set ALLOWED_HOSTS array as 'tailsontrails.herokuapp.com', 'localhost'

13. Create Procfile




## Credit


Django Secret Key Generator https://miniwebtool.com/django-secret-key-generator/
